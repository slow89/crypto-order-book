(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,n){e.exports=n(39)},27:function(e,t,n){},35:function(e,t,n){},37:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var r,a=n(0),i=n.n(a),s=n(19),o=n.n(s),c=(n(27),n(1)),u=n(2),l=n(5),p=n(4),d=n(6),h=n(8),v=n(3),f=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||v.d,b=n(11);!function(e){e.GDAX_CLIENT_SNAPSHOT="GDAX_CLIENT_SNAPSHOT",e.GDAX_CLIENT_UPDATE_BID="GDAX_CLIENT_UPDATE_BID",e.GDAX_CLIENT_UPDATE_ASK="GDAX_CLIENT_UPDATE_ASK",e.GDAX_CLIENT_UPDATE_STATS="GDAX_CLIENT_UPDATE_STATS"}(r||(r={}));var g=Object(v.c)({bids:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.GDAX_CLIENT_SNAPSHOT:return S(t.payload.snapshot.bids,!1);case r.GDAX_CLIENT_UPDATE_BID:var n=e?Object(b.a)({},e):null;return E(t.payload.change,n,!1);case r.GDAX_CLIENT_UPDATE_BID:default:return e}},asks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.GDAX_CLIENT_SNAPSHOT:return S(t.payload.snapshot.asks,!0);case r.GDAX_CLIENT_UPDATE_ASK:var n=e?Object(b.a)({},e):null;return E(t.payload.change,n,!0);default:return e}},stats:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.GDAX_CLIENT_UPDATE_STATS:return t.payload.stats;default:return e}}});function S(e,t){var n={},r=[];return e.forEach(function(e){var t=parseFloat(e[0]),a=parseFloat(e[1]);n[t.toFixed(2).toString()]=a,r.push(t)}),{values:n,order:O(r,t)}}function E(e,t,n){if(null==t)return console.error("Update Side was recieved before a snapshot"),null;var r=parseFloat(e[1]),a=t.order.indexOf(r,0);if("0"==e[2]){if(delete t.values[r.toFixed(2).toString()],a>-1){var i=t.order.slice();i.splice(a,1),t.order=i}}else if(t.values[r.toFixed(2).toString()]=parseFloat(e[2]),-1==a){var s=t.order.slice();s.push(r),t.order=O(s,n)}return t}function O(e,t){var n=t?function(e,t){return e-t}:function(e,t){return t-e};return e.sort(n)}var m=Object(v.c)({orderBook:g}),_=[function(){return function(e){return function(t){return e(Object(b.a)({payload:{},error:!1,meta:{}},t))}}}],T=f(v.a.apply(void 0,_)),A=n(15),k=n.n(A),j=n(21),D=n(10),y=function(){function e(t){Object(c.a)(this,e),this.payload=t,this.type=r.GDAX_CLIENT_SNAPSHOT}return Object(u.a)(e,null,[{key:"create",value:function(t){return new e({snapshot:t})}}]),e}(),N=function(){function e(t){Object(c.a)(this,e),this.payload=t,this.type=r.GDAX_CLIENT_UPDATE_ASK}return Object(u.a)(e,null,[{key:"create",value:function(t){return new e({change:t})}}]),e}(),C=function(){function e(t){Object(c.a)(this,e),this.payload=t,this.type=r.GDAX_CLIENT_UPDATE_BID}return Object(u.a)(e,null,[{key:"create",value:function(t){return new e({change:t})}}]),e}(),w=function(){function e(t){Object(c.a)(this,e),this.payload=t,this.type=r.GDAX_CLIENT_UPDATE_STATS}return Object(u.a)(e,null,[{key:"create",value:function(t){return new e({stats:t})}}]),e}(),B=Object(h.b)(null,function(e){return{loadSnapshot:function(t){return e(y.create(t))},updateAsks:function(t){return e(N.create(t))},updateBids:function(t){return e(C.create(t))},updateStats:function(t){return e(w.create(t))}}}),I=function(){function e(){Object(c.a)(this,e)}return Object(u.a)(e,null,[{key:"get",value:function(e){return fetch(e).then(function(e){if(e.status<200||e.status>299)return e;var t=e.text();return null===t?null:t.then(function(e){return JSON.parse(e)})}).catch(function(e){console.error(e)})}}]),e}(),P=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(p.a)(t).call(this,e))).getStats=n.getStats.bind(Object(D.a)(Object(D.a)(n))),n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.getStats();var t=new WebSocket("wss://ws-feed.pro.coinbase.com");t.addEventListener("message",function(t){var n=JSON.parse(t.data);switch(n.type){case"snapshot":e.props.loadSnapshot(n);break;case"l2update":n.changes.forEach(function(t){"buy"==t[0]?e.props.updateBids(t):e.props.updateAsks(t)})}}),t.addEventListener("open",function(e){console.log(e),t.send(JSON.stringify({type:"subscribe",product_ids:["BTC-USD"],channels:["level2",{name:"ticker",product_ids:["BTC-USD"]}]}))}),t.addEventListener("error",function(e){console.log(e)}),setInterval(this.getStats,6e4)}},{key:"getStats",value:function(){var e=Object(j.a)(k.a.mark(function e(){var t;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.get("https://api.pro.coinbase.com/products/BTC-USD/stats");case 2:t=e.sent,this.props.updateStats(t);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return null}}]),t}(i.a.PureComponent);P.connected=B(P);var L;n(35);!function(e){e[e.Bid=0]="Bid",e[e.Ask=1]="Ask"}(L||(L={}));var U=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.level.side==L.Bid?"bid level ":"ask level ";this.props.last&&(e+="last");var t=this.props.totalSize?{backgroundColor:this.props.level.side==L.Bid?"rgba(92, 160, 81, "+this.props.level.size/this.props.totalSize+")":"rgba(191, 92, 72, "+this.props.level.size/this.props.totalSize+")"}:void 0;return i.a.createElement("div",{className:e,style:t},i.a.createElement("div",{className:"price"},"$",this.props.level.price.toFixed(2).toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")),i.a.createElement("div",{className:"size"},this.props.level.size<1?this.props.level.size.toFixed(4):this.props.level.size.toPrecision(5)))}}]),t}(i.a.PureComponent);function X(e,t){return t.bind(e)}var z=n(12),G={orderBook:new function e(){var t=this;Object(c.a)(this,e),this.levelsToShow=20,this.getState=X(this,function(e){return e.orderBook}),this.getBids=X(this,function(e){return t.getState(e).bids}),this.getAsks=X(this,function(e){return t.getState(e).asks}),this.getTopBids=X(this,Object(z.a)([this.getBids],function(e){return null==e?null:e.order.slice(0,t.levelsToShow).map(function(t){return{price:t,size:e.values[t.toFixed(2).toString()],side:L.Bid}})})),this.getTopAsks=X(this,Object(z.a)([this.getAsks],function(e){return null==e?null:e.order.slice(0,t.levelsToShow).reverse().map(function(t){return{price:t,size:e.values[t.toFixed(2).toString()],side:L.Ask}})})),this.getMidpoint=X(this,Object(z.a)([this.getAsks,this.getBids],function(e,t){if(null==e||null==t)return null;var n=t.order[0];return n+(e.order[0]-n)/2})),this.getStats=X(this,function(e){return t.getState(e).stats})}},x=Object(h.b)(function(e){var t=G.orderBook.getTopBids(e),n=G.orderBook.getTopAsks(e),r=G.orderBook.getStats(e),a=r?parseFloat(r.open):void 0,i=G.orderBook.getMidpoint(e);return{bids:t,asks:n,midpoint:i,percentageChange:i&&a?(i-a)/a*100:void 0,totalSize:t&&n?t.map(function(e){return e.size}).reduce(function(e,t){return e+t})+n.map(function(e){return e.size}).reduce(function(e,t){return e+t}):void 0}},null),F=(n(37),function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.bids?this.props.bids.length:0,n=this.props.bids?this.props.bids.map(function(n,r){return i.a.createElement(U,{level:n,key:n.price,last:r===t-1,totalSize:e.props.totalSize})}):null,r=this.props.asks?this.props.asks.map(function(t,n){return i.a.createElement(U,{level:t,key:t.price,last:0===n,totalSize:e.props.totalSize})}):null;return this.props.midpoint?i.a.createElement("div",{className:"wrapper"},i.a.createElement("div",{className:"order-book"},i.a.createElement("div",{className:"title"},"BTC-USD"),i.a.createElement("div",{className:"column-header"},i.a.createElement("div",null,"Price (USD)"),i.a.createElement("div",null,"Market Size")),i.a.createElement("div",{className:"asks"},r),i.a.createElement("div",{className:"midpoint"},"Midpoint: $",this.props.midpoint.toFixed(3).toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"),this.props.percentageChange?i.a.createElement("div",{className:this.props.percentageChange>0?"positive":this.props.percentageChange<0?"negative":void 0},this.props.percentageChange>0?"+":this.props.percentageChange<0?"-":void 0,this.props.percentageChange.toFixed(2),"%"):void 0),i.a.createElement("div",{className:"bids"},n))):null}}]),t}(i.a.PureComponent));F.connected=x(F);var M=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=Object(v.e)(m,T);return i.a.createElement(h.a,{store:e},i.a.createElement(F.connected,null),i.a.createElement(P.connected,null))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[22,2,1]]]);
//# sourceMappingURL=main.11916d60.chunk.js.map